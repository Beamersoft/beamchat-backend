paths:
  /messages:
    get:
      x-swagger-protected: true
      x-swagger-protected-level: 30
      tags:
        - messages
      summary: messages list
      x-swagger-router-controller: universal.search
      x-swagger-skip-fields:
        - _n
        - _v
        - _retry
        - added
        - password
        - salt
      x-swagger-public-field:
        - firstName
        - lastName
      parameters:
        - name: authorization
          in: header
          required: true
          type: string
        - $ref: '#/parameters/q'
        - $ref: '#/parameters/page'
        - $ref: '#/parameters/sorting'
        - $ref: '#/parameters/limit'
        - $ref: '#/parameters/fields'

      responses:
        '200':
          description: messages list
          schema:
            $ref: '#/definitions/message'

    delete:
      x-swagger-protected: true
      x-swagger-protected-level: 30
      tags:
        - messages
      summary: delete message
      x-swagger-router-controller: universal.remove
      parameters:
        - name: authorization
          in: header
          required: true
          type: string
        - name: _id
          in: query
          required: true
          type: string
      responses:
        '200':
          description: deleted message
          schema:
            $ref: '#/definitions/message'

definitions:
  message:
    type: object
    properties:
      messageId:
        type: string
        required: true
      chatId:
        type: string
        required: true
      senderId:
        type: string
        required: true
      status:
        type: string
        required: true
      createdAt:
        type: string
        required: true
      text:
        type: string
        required: true
      iv:
        type: string
        required: true